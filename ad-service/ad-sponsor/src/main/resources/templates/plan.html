<!DOCTYPE html><html><head>    <!-- 页面meta -->    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <title>广告投放平台</title>    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">    <!-- 引入样式 -->    <link rel="stylesheet" href="../static/plugins/elementui/index.css">    <link rel="stylesheet" href="../static/plugins/font-awesome/css/font-awesome.min.css">    <link rel="stylesheet" href="../static/css/style.css"></head><body class="hold-transition"><div id="app">    <div class="content-header">        <h1>推广计划列表</h1>    </div>    <div class="app-container">        <div class="box">            <!--            头部操作按钮【注册 登录 刷新】-->            <div class="filter-container">                <el-col :span="20">                    <el-button type="primary" class="butT" @click="test()">主页</el-button>                    <el-button type="primary" class="butT" @click="addPlanBTN()">新建推广计划</el-button>                </el-col>            </div>            <!--            主体信息展示-->            <el-table size="small" current-row-key="id" :data="dataList" stripe highlight-current-row>                <el-table-column type="index" align="center" label="序号" width="50"></el-table-column>                <el-table-column prop="planName" label="推广计划名" align="center"></el-table-column>                <el-table-column prop="startDate" label="开始日期" align="center"></el-table-column>                <el-table-column prop="endDate" label="结束日期" align="center"></el-table-column>                <el-table-column label="操作" align="center">                    <template slot-scope="scope">                        <el-button type="primary" size="mini" @click="addUnitBTN(scope.row)">添加推广单元</el-button>                    </template>                </el-table-column>                <el-table-column label="操作" align="center">                    <template slot-scope="scope">                        <el-button type="primary" size="mini" @click="showAllUnitBTN(scope.row)">查看所有推广单元</el-button>                    </template>                </el-table-column>            </el-table>            <!--添加推广单元-->            <div class="add-form">                <el-dialog title="添加推广单元" :visible.sync="addUnitFormVisible">                    <el-form ref="addUnitForm" :model="addUnitDate" label-position="right"                             label-width="100px">                        <el-row>                            <el-col :span="12">                                <el-form-item label="单元名" prop="title">                                    <el-input v-model="addUnitDate.unitName"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="位置类型" prop="title"><!--                                    <el-input v-model="addUnitDate.positionType"/>-->                                    <el-select v-model="addUnitDate.positionType" placeholder="请选择">                                        <el-option v-for="item in options"                                                   :key="item.value"                                                   :label="item.label"                                                   :value="item.value">                                        </el-option>                                    </el-select>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="预算" prop="title">                                    <el-input v-model="addUnitDate.budget"/>                                </el-form-item>                            </el-col>                        </el-row>                    </el-form>                    <div slot="footer" class="dialog-footer">                        <el-button @click="cancel()">取消</el-button>                        <el-button type="primary" @click="handleAddUnit()">添加</el-button>                    </div>                </el-dialog>            </div>            <!--新建推广计划-->            <div class="add-form">                <el-dialog title="新建推广计划" :visible.sync="addPlanFormVisible">                    <el-form ref="addPlanDate" :model="addPlanDate" label-position="right"                             label-width="100px">                        <el-row>                            <el-col :span="12">                                <el-form-item label="计划名" prop="title">                                    <el-input v-model="addPlanDate.planName"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="开始时间" prop="title"><!--                                    <el-input v-model="addPlanDate.startDate"/>-->                                    <el-date-picker                                            value-format="yyyy-MM-dd"                                            v-model="addPlanDate.startDate"                                            type="date"                                            placeholder="选择日期">                                    </el-date-picker>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="结束时间" prop="title"><!--                                    <el-input v-model="addPlanDate.endDate"/>-->                                    <el-date-picker                                            value-format="yyyy-MM-dd"                                            v-model="addPlanDate.endDate"                                            type="date"                                            placeholder="选择日期">                                    </el-date-picker>                                </el-form-item>                            </el-col>                        </el-row>                    </el-form>                    <div slot="footer" class="dialog-footer">                        <el-button @click="cancel()">取消</el-button>                        <el-button type="primary" @click="handleAddPlan()">添加</el-button>                    </div>                </el-dialog>            </div>        </div>    </div></div></body><!-- 引入组件库 --><script src="../static/js/vue.js"></script><script src="../static/plugins/elementui/index.js"></script><script type="text/javascript" src="../static/js/jquery.min.js"></script><script src="../static/js/axios-0.18.0.js"></script><script>    var vue = new Vue({        el: '#app',        data: {            dataList: [],//当前页要展示的列表数据            addUnitFormVisible: false,            addPlanFormVisible: false,            addUnitDate: {},            addPlanDate: {},            userId: 15,            options: [{                value: 1,                label: '开屏'            }, {                value: 2,                label: '贴片'            }, {                value: 4,                label: '中贴片'            }, {                value: 8,                label: '暂停贴片'            }, {                value: 16,                label: '结束贴片'            }],            value: ''        },        //钩子函数，VUE对象初始化完成后自动执行        created() {            console.log("钩来！")            this.getAll()        },        methods: {            test(){                axios.post("/daijizai/ad-search/test")                    .then(resp => {                        console.log(resp.data)                    })            },            getAll() {                axios.post("/ad-sponsor/get/adPlan/" + this.userId)                    .then(resp => {                        this.dataList = resp.data.data;                    })            },            showAllUnitBTN(row) {                window.open("/ad-sponsor/unitPage/" + row.id)            },            //【操作】添加推广单元            addUnitBTN(row) {                this.resetForm()                this.addUnitFormVisible = true                this.addUnitDate.planId = row.id            },            //处理【添加推广单元】            handleAddUnit() {                axios.post("/ad-sponsor/create/adUnit", {                    planId: this.addUnitDate.planId,                    unitName: this.addUnitDate.unitName,                    positionType: this.addUnitDate.positionType,                    budget: this.addUnitDate.budget,                }).then(resp => {                    if (resp.data.code === 0) {                        this.$message.success(resp.data.message)//显示成功提示                        this.addUnitFormVisible = false;//关闭窗口                        this.getAll();//刷新页面                    } else {                        this.$message.error(resp.data.message)//显示失败提示                    }                })            },            addPlanBTN() {                this.resetForm()                this.addPlanFormVisible = true            },            //处理【新建推广计划】            handleAddPlan() {                axios.post("/ad-sponsor/create/adPlan", {                    userId: this.userId,                    planName: this.addPlanDate.planName,                    startDate: this.addPlanDate.startDate,                    endDate: this.addPlanDate.endDate,                }).then(resp => {                    if (resp.data.code === 0) {                        this.$message.success(resp.data.message)//显示成功提示                        this.addPlanFormVisible = false;//关闭窗口                        this.getAll();//刷新页面                    } else {                        this.$message.error(resp.data.message)//显示失败提示                    }                })            },            //重置表单            resetForm() {                this.addUnitDate = {}                this.addPlanDate = {}            },            //取消            cancel() {                this.addUnitFormVisible = false                this.addPlanFormVisible = false            },        }    })</script></html>